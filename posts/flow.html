<!DOCTYPE html>
<html prefix="og: http://ogp.me/ns# article: http://ogp.me/ns/article# " vocab="http://ogp.me/ns" lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width">
<title>Flow | Graham Wheeler's Random Forest</title>
<link href="../assets/css/rst.css" rel="stylesheet" type="text/css">
<link href="../assets/css/code.css" rel="stylesheet" type="text/css">
<link href="../assets/css/theme.css" rel="stylesheet" type="text/css">
<link rel="stylesheet" type="text/css" href="../assets/css/screen.css">
<link rel="stylesheet" type="text/css" href="../assets/css/nav.css">
<link rel="stylesheet" type="text/css" href="../assets/css/custom.css">
<link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=Merriweather:300,700,700italic,300italic%7COpen+Sans:700,400%7CInconsolata">
<link href="../assets/css/ipython.min.css" rel="stylesheet" type="text/css">
<link href="../assets/css/nikola_ipython.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="alternate" type="application/rss+xml" title="RSS" href="http://feeds.feedburner.com/GrahamWheelersRandomForest">
<link rel="canonical" href="https://www.grahamwheeler.com/posts/flow.html">
<!--[if lt IE 9]><script src="../assets/js/html5.js"></script><![endif]--><meta name="author" content="Graham Wheeler">
<link rel="prev" href="personality-and-relationships2.html" title="Personality Patterns" type="text/html">
<meta property="og:site_name" content="Graham Wheeler's Random Forest">
<meta property="og:title" content="Flow">
<meta property="og:url" content="https://www.grahamwheeler.com/posts/flow.html">
<meta property="og:description" content='"A bad system will beat a good person every time" -
Edwards Deming
This post is based on a tech talk I gave at eBay in early 2018. eBay had gone through a company-wide transformation to agile processe'>
<meta property="og:type" content="article">
<meta property="article:published_time" content="2019-01-02T21:50:00-08:00">
</head>
<body class="nav-closed">

<div class="nav">
    <h3 class="nav-title">Menu</h3>
    <a href="#" class="nav-close">
        <span class="hidden">Close</span>
    </a>
    <ul>
<li class="nav-opened" role="presentation">
            <a href="../index.html">Home</a>
        </li>
        <li class="nav-opened" role="presentation">
            <a href="../archive.html">Archives</a>
        </li>
        <li class="nav-opened" role="presentation">
            <a href="../categories/index.html">Tags</a>
        </li>
        <li class="nav-opened" role="presentation">
            <a href="../rss.xml">RSS</a>
        </li>
        <li class="nav-opened" role="presentation">
            <a href="https://twitter.com/gramnix">My Twitter</a>
        </li>
        <li class="nav-opened" role="presentation">
            <a href="https://github.com/gramster">My Github</a>
        </li>
        <li class="nav-opened" role="presentation">
            <a href="https://www.linkedin.com/in/grahamwheeler">My LinkedIn</a>
        </li>
    
    
    </ul>
</div>
<span class="nav-cover"></span>

<div class="site-wrapper">
    <header class="main-header post-head no-cover"><nav class="main-nav overlay clearfix"><a class="blog-logo" href="https://www.grahamwheeler.com/"><img src="https://getnikola.com/assets/img/logo.svg" alt="Blog Logo"></a>
            <a class="menu-button" href="#"><span class="burger">☰</span><span class="word">Menu</span></a>
        </nav></header><main id="content" class="content" role="main"><article class="post post"><header class="post-header"><h1 class="post-title">Flow</h1>
        <section class="post-meta"> by
            Graham Wheeler
            on
            <time class="post-date" datetime="2019-01-02T21:50:00-08:00">
                2019-01-02 21:50
            </time></section></header><section class="post-content"><div>
<p><em>"A bad system will beat a good person every time"</em> -
Edwards Deming</p>
<p>This post is based on a tech talk I gave at eBay in early 2018. eBay had gone through a company-wide transformation to agile processes (where before this had been team-specific) and the main points I wanted to make where that it was important to make the hidden things the consumed people's time visible, explicit, and properly prioritized, if we want to improve throughput or <em>flow</em>. Note that this is not the same <em>flow</em> as Csíkszentmihályi's "being in the zone", but being in the zone can improve throughput.</p>
<p>It was a fun talk not least because of the inclusion of the "I Love Lucy" video. The original talk material was mostly bullet points; I have changed it to have a somewhat better narrative structure but haven't changed it too much.</p>
<p><br></p>
<h4>We have too much Work in Progress (WIP)!</h4>
<p>We take on too much work in progress (WIP) for many reasons, including:</p>
<ul>
<li>It's hard to say no. We want to please people and be team players, and we defer to authority. So we say yes to random requests and our sprints are disrupted by unplanned work.</li>
<li>We frequently underestimate the effort involved in tasks, and we often have unclear priorities. So we end up having to scramble to meet deadlines because we have been working on the wrong things or gave bad dates that were communicated up and/or out and are now hard deadlines. </li>
<li>New things are often more fun to start than existing things are to finish, so we get to 90% done and then don't finish properly.</li>
</ul>
<p>But too much WIP comes with a <em>lot</em> of associated problems:</p>
<ul>
<li>delayed delivery of important features</li>
<li>throwaway work due to short-term hacks or unclear requirements that were worked on anyway</li>
<li>neglected work adding to technical debt and lower quality</li>
<li>increased costs</li>
<li>poor morale and burnout of personnel</li>
<li>context switching and multitasking, causing lack of <em>flow</em> (throughput)</li>
</ul>
<p>So how can we improve flow? That is the topic for this post. You can probably guess that reducing WIP is key, but that's not all. To understand the problem better it is worth going on a short historical tour of operational optimization in the manufacturing world.</p>
<p><br></p>
<h4>Henry Ford's Assembly Line (1908)</h4>
<p>Henry Ford thought about the problem or improving throughput while lowering cost. He realized that if the primary objective of operations is to optimize throughput, then we want to produce at a constant (high) rate, and so he invented the assembly line, which is great for a large volume of homogenous parts.</p>
<p><img alt="VW Assembly Line" src="../images/assemblyline.jpg"></p>
<p>The problem with the assembly line is that work in progress cannot pile up or the entire line can come to a halt.</p>
<iframe width="560" height="315" src="https://www.youtube.com/embed/3s2VdtYw-g0" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>

<p>Or worse! If the line isn't halted, quality suffers badly.</p>
<iframe width="560" height="315" src="https://www.youtube.com/embed/_y0nsN4px10" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>

<p>So it is critical to determine when <em>not</em> to produce, and to abolish local efficiencies that can overload downstream stations.</p>
<p><br></p>
<h4>Taichii Ohno, Toyota and the invention of Kanban (1948)</h4>
<p>While Ford's assembly line was great for a limited variety of mass-produced items, in post-war Japan there was a demand for a more varied set of cars. Taichii Ohno of Toyota realized he could control the amount of work in progress by using containers of parts of fixed capacity. Upstream workers were not allowed to produce more than that many parts. This meant that inventory did not build up but that there was still a buffer that downstream workers could pull from, and that buffer was refilled "just in time" (so the system is often called JIT).</p>
<p>Every station had an "Andon cord" which could be used to signal an issue at that station or with the quality of parts arriving from upstream.</p>
<p>Furthermore, by reducing the size of the containers/buffers slowly, new issues would reveal themselves, and the lessons learned could be used to iterate and improve the system, allowing continuous improvement.</p>
<p><img src="https://www.shmula.com/wp-content/uploads/2014/11/pillars-andon-and-JIT-lean-manufacturing.png" alt="toyota production system andon cord example" width="760" height="508"></p>
<p>This system was still sensitive to externalities like market demand: because it reduced idle inventory a sudden surge in orders could mean delays. But it became the state of the art post World War II and was studied and emulated world-wide.</p>
<p><br></p>
<h4>Goldratt's Theory of Constraints (1984)</h4>
<p>Eliyahu Goldratt was an Israeli academic who joined a software company, Creative Output, that made one of the first programs to do finite capacity scheduling for manufacturing. In the course of his work he realized a better way to limit WIP is to focus on <em>time</em>. He noticed that every system has one bottleneck tighter than all the others, which limits the <em>throughput</em> of the system as a whole, and that <em>the only way to improve the overall throughput of the system is to improve the throughput at that constraint</em>.</p>
<p>Ironically his "Theory of Constraints" or TOC, published in the book <a href="https://en.wikipedia.org/wiki/The_Goal_(novel)">The Goal</a>, was not well-received at the company and he was eventually fired along with a number of his collaborators. But <em>The Goal</em> has since been recognized as one of the <a href="http://content.time.com/time/specials/packages/article/0,28804,2086680_2086683_2087672,00.html">25 Most Influential Business Management Books</a> by Time Magazine.</p>
<p>An easy way to understand the concept of the constraint, and how the optimal throughput of the overall system matches the optimal throughput of the system, is to think of a busy 3-lane highway with a partial lane closure. At the point where the lane restriction starts, there is typically a traffic jam caused by cars merging, and the remaining two open lanes end up underutilized because cars enter the area slower. The end result may be less efficient than a highway that is 2-lanes throughout (it certainly can't be more efficient).</p>
<p>An important lesson from this is that improvements in efficiency that are <em>not</em> at the limiting constraint can actually make things worse! Making the 3-lane highway 4-lanes while still closing down to just 2 can make the bottleneck even more severe and slow. So optimizing parts of the system without fixing the core constraint may give an illusion of improvement but that's all it is; if it is upstream of the bottleneck it will make things worse at the bottleneck, while if it is downstream it is simply going to be wasted excess capacity sitting idle.</p>
<p>Goldratt came up with the analogy of the drum-buffer-rope to help explain his theory:</p>
<ul>
<li>the <em>drum</em> is the processing rate of the bottleneck that determines the pace at which the entire system should work</li>
<li>the <em>rope</em> is a signal that “pulls” a new item of work into the pipe only when an item is processed by the bottleneck</li>
<li>as every unit of lost time at the bottleneck is lost time for the entire system, the bottleneck should never go idle, so there needs to be a <em>buffer</em> of work just upstream ready to be processed</li>
</ul>
<p><img alt="DBR Visualized" src="../images/dbr_english.jpg"></p>
<p>Goldratt suggested 5 steps to optimizing a system based on TOC:</p>
<ul>
<li>identify the constraint</li>
<li>optimize the use of the constraint (implement the "buffer")</li>
<li>subordinate all non-constraints to the constraint (add the "rope")</li>
<li>elevate the constraint (i.e. add capacity or make changes to increase its capacity, to speed up the "drum")</li>
<li>rinse and repeat, because the constraint is now likely somewhere else</li>
</ul>
<p><br></p>
<h4>But This is Manufacturing, What about Knowledge Work?...</h4>
<p>All of the above theories come from manufacturing, where tasks tend to be highly repetitive and take more-or-less fixed amounts of time. But we can still think of knowledge work as an assembly line!</p>
<p><a title="Andy Carmichael [CC BY-SA 4.0 (https://creativecommons.org/licenses/by-sa/4.0)], from Wikimedia Commons" href="https://commons.wikimedia.org/wiki/File:Sample_Kanban_Board.png"><img width="512" alt="Sample Kanban Board" src="https://upload.wikimedia.org/wikipedia/commons/thumb/c/c2/Sample_Kanban_Board.png/512px-Sample_Kanban_Board.png"></a></p>
<p><br></p>
<h4>The "Efficiency Paradox"</h4>
<p><em>A company where everyone is busy working is terribly inefficient. The only way that’s possible is if everyone is optimizing their own productivity, at the expense of the bottleneck’s productivity!</em></p>
<p>For the bottleneck to be fully utilized, <em>all other parts must have excess capacity</em>, which directly contradicts the conventional wisdom of “everyone stay busy,” (using all available capacity). Instead, no team should take on more work than their bottleneck can process, and one of the tasks of management is to determine the capacity of the bottleneck, fill it, and then allow no more projects to begin until one is completed.</p>
<p>And then to fix the bottleneck :-)</p>
<p>As for Individual Contributors: if you don't have enough work to keep you busy, first try to help those who are overloaded, rather than coming up with new projects!</p>
<p>So how do you identify the bottleneck? In many cases, if you have a Kanban board it is fairly obvious, as work is piling up immediately upstream. If you keep track of agile metrics, the constraint will be the step with the longest average cycle time. In the case that it is not so obvious, you can hypothesize what it might be (by looking for scarce resources or asking people), and try adding capacity at that point. If overall throughput improves, it was the constraint; if the added capacity is idle, the constraint is upstream, else the constraint is downstream (and throughput may be worse!)</p>
<p>Note that constraints are often just business policies! You may have policies that block the completion of work items at some stage and that could be the bottleneck.</p>
<p>I should note here that if you have simple processes and largely interchangeable workers, then you may not need to worry about much of this optimization; it is mostly useful in complex situations with multiple roles and stages of work. I have worked in team like the former where optimization would have not changed anything, but also in teams where there are multiple stages of review blocked on the availability of various (non-interchangeable) people, where the places to focus attention are not always obvious.</p>
<p><br></p>
<h4>Identifying WIP Limits at Non-Constraint Stages</h4>
<p>If you're doing Kanban, you may want WIP limits in each of your swim lanes. It's usually pretty obvious what the WIP limit is at the constraint as it is the throughput of the whole system. What about determining WIP limits at other points? You can do this empirically for upstream swim lanes:</p>
<ul>
<li>strictly enforce WIP limits and start reducing them</li>
<li>as WIP drops, the least constrained resources will start to run out of things to do, and will start sending less work to the constraint</li>
<li>the constraint throughput will stay the same or possibly even increase, as will overall throughput</li>
<li>eventually even the constraint will start having idle capacity and you will have gone too far; the sweet spot is just above this point (and then you may want to add a buffer).</li>
</ul>
<p>Apart from reducing WIP coming from upstream and adding the buffer, there are other ways to optimize the constraint:</p>
<ul>
<li>improve quality checks or other requirements on upstream work to reduce wasted time at the constraint</li>
<li>offload work from the constraint to others, if possible</li>
<li>add capacity if that is an option and other avenues have been exhausted.</li>
</ul>
<p>It helps to identify sources of inefficiency at the constraint and improve them. For example:</p>
<ul>
<li>too much partially completed or incomplete but neglected work (WIP)</li>
<li>unplanned work/randomizations</li>
<li>unnecessary work</li>
<li>unknown dependencies(software/hardware/people/resources/activities)</li>
<li>unclear and competing priorities</li>
</ul>
<p>In order to understand what these are it is critical to make the work visible! You can't manage what you can't see. You should track anything that takes meaningful time, and even track small things that only one person knows how to do, or that impact other teams (unknown dependencies). Classifying these into different categories (e.g. bug fixes, feature work, deployments, meetings) and color-coding them is helpful.</p>
<p>Spend some time identifying <em>pain points</em> like too many meetings, conflicting priorities, interruptions, etc, and track the top ones - knowing how much time these suck up will help to make a case for reducing them or bringing them under control.</p>
<p>You can use horizontal swim lanes with WIP limits to limit different types of work if that is helpful. </p>
<p><img alt="Kanban with Horizontal WIP-Limited Swimlanes" src="../images/kanban2.png"></p>
<p>Note that cycle time, lead time and throughput are all <em>trailing indicators</em> of problems but WIP is a <em>leading indicator</em>. Think of getting on a busy highway: you can tell when getting on if it is congested (high WIP) that it will take a long time to get to work (cycle time).</p>
<p><br></p>
<h4>The Problem of Dependencies</h4>
<p>Dependencies between teams can cause delays as coordination takes time and effort, and people may not be available when needed. Dependencies in code can cause delays or quality issues as changes in one place can break things in other places.</p>
<p>Every dependency you can eliminate, whether between people or systems, improves the chance you can deliver on time.</p>
<p>Often by the time you realize you have a dependency you are already in trouble, so it makes sense to identify dependencies as early as possible and try to reduce them.</p>
<p>If you can organize your teams around products rather than silos (whether component-based or discipline-based) that will help a lot. Otherwise implement processes to grease the wheels between teams with dependencies, and make sure the dependencies are visible across the teams. Use color-coding or dedicated swim lanes in your Kanban or Scrum boards to highlight issues with cross-team dependencies. </p>
<p>For dependencies in code, these can be identified with tools like dependency diagram generators. You can use the count of  items dependencies to get approximation of risk. Refactor when possible to reduce dependencies.</p>
<p><br></p>
<h4>Dealing with Unplanned Work</h4>
<p>Unplanned work eats schedules and milestones for breakfast, by taking time away from planned work causing delays and decreased quality. Track planned vs. unplanned work over time and then allocate some WIP count to unplanned work (and/or capacity if time-boxing with Scrum), so that it becomes semi-planned. It may be helpful to have a designated person on a rotation to deal with unplanned work.</p>
<p><br></p>
<h4>Dealing with Interruptions</h4>
<p>Context-switching is expensive, and interruptions really break people's concentration. Have your individual contributors track interruptions over a sprint and get a sense of their cost, and their sources. Some tips for reducing interruptions and improving focus include:</p>
<ul>
<li>consider using the <em>Pomodoro technique</em>
</li>
<li>establish ground rules with your team and partners about when they can interrupt</li>
<li>plan your work, schedule it in Outlook, work your plan</li>
<li>aim for focused work in the morning and meetings etc. in the afternoon (see <em>When</em> by Daniel Pink)</li>
</ul>
<p><br></p>
<h4>The Importance of Prioritization</h4>
<p>Without clear priorities, we often try to do things in parallel resulting in high WIP. Only one thing can be the most important thing, so it is important to be clear about what that is. With a properly prioritized backlog there should be much less temptation to take on multiple tasks.</p>
<p>To avoid arguments, it can be helpful to have a clear policy for determining priority. A useful one to use is <a href="https://en.wikipedia.org/wiki/Cost_of_delay">Cost of Delay</a> which combines both urgency and business value, but it is not always the easiest to measure. You can find a tutorial <a href="https://leankit.com/learn/lean/cost-of-delay/">here</a>.</p>
<p><br></p>
<h4>Neglected Work and Technical Debt</h4>
<p>We often start some work but never quite complete it. For example we may have varying level of test coverage depending on who did the work and how much time pressure was applied. We may have low priority bugs that fester for a long time. Eventually some of these neglected issues become more serious and costly to deal with, and now are harder to complete because the context and working memory is lost.</p>
<p>For incomplete features, it may well be better to kill/remove the code than to leave around in partially completed state. Avoid the <em>sunk cost fallacy</em> - only consider the incremental cost of completion to the expected return, not the already expended effort which is a non-recoverable cost. </p>
<p>To help avoid getting in this situation ion the first place, set SLAs on work in progress, and flag items that haven't moved and have exceeded the SLA. See if the flagged items can be killed or moved back to the backlog, or raise the priority and get it done.</p>
</div>
    </section><!-- Social buttons --><div id="addthisbox" class="addthis_toolbox addthis_peekaboo_style addthis_default_style addthis_label_style addthis_32x32_style">
<a class="addthis_button_more">Share</a>
<ul>
<li>
<a class="addthis_button_facebook"></a>
</li>
<li>
<a class="addthis_button_google_plusone_share"></a>
</li>
<li>
<a class="addthis_button_linkedin"></a>
</li>
<li>
<a class="addthis_button_twitter"></a>
</li>
</ul>
</div>
<script src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-4f7088a56bb93798"></script><!-- End of social buttons --><footer class="post-footer"><section class="comments hidden-print"><h2>Comments</h2>
        
        
        <div id="disqus_thread"></div>
        <script>
        var disqus_shortname ="randomforest",
            disqus_url="https://www.grahamwheeler.com/posts/flow.html",
        disqus_title="Flow",
        disqus_identifier="cache/posts/flow.html",
        disqus_config = function () {
            this.language = "en";
        };
        (function() {
            var dsq = document.createElement('script'); dsq.async = true;
            dsq.src = 'https://' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script><noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a>
</noscript>
    <a href="https://disqus.com" class="dsq-brlink" rel="nofollow">Comments powered by <span class="logo-disqus">Disqus</span></a>


        </section></footer></article><script>var disqus_shortname="randomforest";(function(){var a=document.createElement("script");a.async=true;a.src="https://"+disqus_shortname+".disqus.com/count.js";(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(a)}());</script></main><footer class="site-footer clearfix"><section class="poweredby">Contents © 2019         <a href="mailto:gram@geekraver.com">Graham Wheeler</a> - Powered by         <a href="https://getnikola.com" rel="nofollow">Nikola</a>         </section></footer>
</div>

    <script type="text/javascript" src="../assets/js/jquery.js"></script><script type="text/javascript" src="../assets/js/jquery.fitvids.js"></script><script type="text/javascript" src="../assets/js/index.js"></script><script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-67535606-1', 'auto');
  ga('send', 'pageview');

</script>
</body>
</html>
